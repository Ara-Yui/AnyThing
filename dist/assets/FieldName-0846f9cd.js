var tt=Object.defineProperty;var nt=(r,t,n)=>t in r?tt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var y=(r,t,n)=>(nt(r,typeof t!="symbol"?t+"":t,n),n);import{u as et}from"./index-0e957f34.js";var q=(r=>(r.TEXT="text",r.TEXTAREA="textarea",r.RICHTEXT="richText",r.DATE="date",r.RADIO="radio",r.CHECKBOX="checkbox",r.SELECT="select",r.SWITCH="switch",r.SLIDER="slider",r.IMAGE="image",r.FILE="file",r.COLOR="color",r))(q||{});class rt{constructor(){y(this,"key");y(this,"label")}}var W=(r=>(r.DATE="date",r.DATERANGE="daterange",r.DATETIME="datetime",r.DATETIMERANGE="datetimerange",r.YEAR="year",r.MONTH="month",r.MONTHRANGE="monthrange",r))(W||{});const X=et().AppConfig;class Y extends rt{constructor(){super(...arguments);y(this,"formType",q.TEXT);y(this,"dateType",W.DATE);y(this,"maxLength",X.maxLength);y(this,"minLength",X.minLength);y(this,"required",!1);y(this,"placeholder","");y(this,"disabled",!1);y(this,"clearable",!0);y(this,"hidden",!1);y(this,"defaultValue","");y(this,"trim",!0);y(this,"emumRecord",[]);y(this,"checkedValue",!0);y(this,"unCheckedValue",!1)}}const K=Symbol("customFormFieldConfigName"),I=Symbol("customFormFieldConfigListName");function ht(r){return function(t,n){r||(r=new Y);const e=Reflect.getOwnMetadata(I,t)||[];e.push(n),Reflect.defineMetadata(K,r,t,n),Reflect.defineMetadata(I,e,t)}}function F(r,t){let n=Reflect.getOwnMetadata(K,r,t);if(!n){const i=Object.getPrototypeOf(r);if(i.constructor.name===w.name)return null;n=F(i,t)}if(!n)return null;n.label||(n.label=R(r,t));const e=new Y;return n=Object.assign(e,n),n}function U(r){const t=Reflect.getOwnMetadata(I,r)||[],n=[];for(const e of t){const i=F(r,e);i&&n.push(i)}return n}function j(r){const t=Reflect.getOwnMetadata(I,r)||[],n=Object.getPrototypeOf(r);return n.constructor.name===w.name?t:j(n).concat(t)}var f;(function(r){r[r.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",r[r.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",r[r.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(f||(f={}));var ot=function(){function r(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return r.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},r.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.findTransformMetadatas=function(t,n,e){return this.findMetadatas(this._transformMetadatas,t,n).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?e===f.CLASS_TO_CLASS||e===f.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?e===f.CLASS_TO_PLAIN:!0})},r.prototype.findExcludeMetadata=function(t,n){return this.findMetadata(this._excludeMetadatas,t,n)},r.prototype.findExposeMetadata=function(t,n){return this.findMetadata(this._exposeMetadatas,t,n)},r.prototype.findExposeMetadataByCustomName=function(t,n){return this.getExposedMetadatas(t).find(function(e){return e.options&&e.options.name===n})},r.prototype.findTypeMetadata=function(t,n){return this.findMetadata(this._typeMetadatas,t,n)},r.prototype.getStrategy=function(t){var n=this._excludeMetadatas.get(t),e=n&&n.get(void 0),i=this._exposeMetadatas.get(t),a=i&&i.get(void 0);return e&&a||!e&&!a?"none":e?"excludeAll":"exposeAll"},r.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},r.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},r.prototype.getExposedProperties=function(t,n){return this.getExposedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===f.CLASS_TO_CLASS||n===f.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===f.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.getExcludedProperties=function(t,n){return this.getExcludedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===f.CLASS_TO_CLASS||n===f.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===f.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},r.prototype.getMetadata=function(t,n){var e=t.get(n),i;e&&(i=Array.from(e.values()).filter(function(h){return h.propertyName!==void 0}));for(var a=[],s=0,u=this.getAncestors(n);s<u.length;s++){var c=u[s],M=t.get(c);if(M){var p=Array.from(M.values()).filter(function(h){return h.propertyName!==void 0});a.push.apply(a,p)}}return a.concat(i||[])},r.prototype.findMetadata=function(t,n,e){var i=t.get(n);if(i){var a=i.get(e);if(a)return a}for(var s=0,u=this.getAncestors(n);s<u.length;s++){var c=u[s],M=t.get(c);if(M){var p=M.get(e);if(p)return p}}},r.prototype.findMetadatas=function(t,n,e){var i=t.get(n),a;i&&(a=i.get(e));for(var s=[],u=0,c=this.getAncestors(n);u<c.length;u++){var M=c[u],p=t.get(M);p&&p.has(e)&&s.push.apply(s,p.get(e))}return s.slice().reverse().concat((a||[]).slice().reverse())},r.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var n=[],e=Object.getPrototypeOf(t.prototype.constructor);typeof e.prototype<"u";e=Object.getPrototypeOf(e.prototype.constructor))n.push(e);this._ancestorsMap.set(t,n)}return this._ancestorsMap.get(t)},r}(),g=new ot;function it(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function st(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var z=globalThis&&globalThis.__spreadArray||function(r,t,n){if(n||arguments.length===2)for(var e=0,i=t.length,a;e<i;e++)(a||!(e in t))&&(a||(a=Array.prototype.slice.call(t,0,e)),a[e]=t[e]);return r.concat(a||Array.prototype.slice.call(t))};function ft(r){var t=new r;return!(t instanceof Set)&&!("push"in t)?[]:t}var P=function(){function r(t,n){this.transformationType=t,this.options=n,this.recursionStack=new Set}return r.prototype.transform=function(t,n,e,i,a,s){var u=this;if(s===void 0&&(s=0),Array.isArray(n)||n instanceof Set){var c=i&&this.transformationType===f.PLAIN_TO_CLASS?ft(i):[];return n.forEach(function(l,x){var L=t?t[x]:void 0;if(!u.options.enableCircularCheck||!u.isCircular(l)){var m=void 0;if(typeof e!="function"&&e&&e.options&&e.options.discriminator&&e.options.discriminator.property&&e.options.discriminator.subTypes){if(u.transformationType===f.PLAIN_TO_CLASS){m=e.options.discriminator.subTypes.find(function(_){return _.name===l[e.options.discriminator.property]});var N={newObject:c,object:l,property:void 0},d=e.typeFunction(N);m===void 0?m=d:m=m.value,e.options.keepDiscriminatorProperty||delete l[e.options.discriminator.property]}u.transformationType===f.CLASS_TO_CLASS&&(m=l.constructor),u.transformationType===f.CLASS_TO_PLAIN&&(l[e.options.discriminator.property]=e.options.discriminator.subTypes.find(function(_){return _.value===l.constructor}).name)}else m=e;var C=u.transform(L,l,m,void 0,l instanceof Map,s+1);c instanceof Set?c.add(C):c.push(C)}else u.transformationType===f.CLASS_TO_CLASS&&(c instanceof Set?c.add(l):c.push(l))}),c}else{if(e===String&&!a)return n==null?n:String(n);if(e===Number&&!a)return n==null?n:Number(n);if(e===Boolean&&!a)return n==null?n:Boolean(n);if((e===Date||n instanceof Date)&&!a)return n instanceof Date?new Date(n.valueOf()):n==null?n:new Date(n);if(it().Buffer&&(e===Buffer||n instanceof Buffer)&&!a)return n==null?n:Buffer.from(n);if(st(n)&&!a)return new Promise(function(l,x){n.then(function(L){return l(u.transform(void 0,L,e,void 0,void 0,s+1))},x)});if(!a&&n!==null&&typeof n=="object"&&typeof n.then=="function")return n;if(typeof n=="object"&&n!==null){!e&&n.constructor!==Object&&(!Array.isArray(n)&&n.constructor===Array||(e=n.constructor)),!e&&t&&(e=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var M=this.getKeys(e,n,a),p=t||{};!t&&(this.transformationType===f.PLAIN_TO_CLASS||this.transformationType===f.CLASS_TO_CLASS)&&(a?p=new Map:e?p=new e:p={});for(var h=function(l){if(l==="__proto__"||l==="constructor")return"continue";var x=l,L=l,m=l;if(!o.options.ignoreDecorators&&e){if(o.transformationType===f.PLAIN_TO_CLASS){var N=g.findExposeMetadataByCustomName(e,l);N&&(m=N.propertyName,L=N.propertyName)}else if(o.transformationType===f.CLASS_TO_PLAIN||o.transformationType===f.CLASS_TO_CLASS){var N=g.findExposeMetadata(e,l);N&&N.options&&N.options.name&&(L=N.options.name)}}var d=void 0;o.transformationType===f.PLAIN_TO_CLASS?d=n[x]:n instanceof Map?d=n.get(x):n[x]instanceof Function?d=n[x]():d=n[x];var C=void 0,_=d instanceof Map;if(e&&a)C=e;else if(e){var A=g.findTypeMetadata(e,m);if(A){var V={newObject:p,object:n,property:m},k=A.typeFunction?A.typeFunction(V):A.reflectedType;A.options&&A.options.discriminator&&A.options.discriminator.property&&A.options.discriminator.subTypes?n[x]instanceof Array?C=A:(o.transformationType===f.PLAIN_TO_CLASS&&(C=A.options.discriminator.subTypes.find(function(T){if(d&&d instanceof Object&&A.options.discriminator.property in d)return T.name===d[A.options.discriminator.property]}),C===void 0?C=k:C=C.value,A.options.keepDiscriminatorProperty||d&&d instanceof Object&&A.options.discriminator.property in d&&delete d[A.options.discriminator.property]),o.transformationType===f.CLASS_TO_CLASS&&(C=d.constructor),o.transformationType===f.CLASS_TO_PLAIN&&d&&(d[A.options.discriminator.property]=A.options.discriminator.subTypes.find(function(T){return T.value===d.constructor}).name)):C=k,_=_||A.reflectedType===Map}else if(o.options.targetMaps)o.options.targetMaps.filter(function(T){return T.target===e&&!!T.properties[m]}).forEach(function(T){return C=T.properties[m]});else if(o.options.enableImplicitConversion&&o.transformationType===f.PLAIN_TO_CLASS){var B=Reflect.getMetadata("design:type",e.prototype,m);B&&(C=B)}}var G=Array.isArray(n[x])?o.getReflectedType(e,m):void 0,H=t?t[x]:void 0;if(p.constructor.prototype){var J=Object.getOwnPropertyDescriptor(p.constructor.prototype,L);if((o.transformationType===f.PLAIN_TO_CLASS||o.transformationType===f.CLASS_TO_CLASS)&&(J&&!J.set||p[L]instanceof Function))return"continue"}if(!o.options.enableCircularCheck||!o.isCircular(d)){var b=o.transformationType===f.PLAIN_TO_CLASS?L:l,S=void 0;o.transformationType===f.CLASS_TO_PLAIN?(S=n[b],S=o.applyCustomTransformations(S,e,b,n,o.transformationType),S=n[b]===S?d:S,S=o.transform(H,S,C,G,_,s+1)):d===void 0&&o.options.exposeDefaultValues?S=p[L]:(S=o.transform(H,d,C,G,_,s+1),S=o.applyCustomTransformations(S,e,b,n,o.transformationType)),(S!==void 0||o.options.exposeUnsetFields)&&(p instanceof Map?p.set(L,S):p[L]=S)}else if(o.transformationType===f.CLASS_TO_CLASS){var S=d;S=o.applyCustomTransformations(S,e,l,n,o.transformationType),(S!==void 0||o.options.exposeUnsetFields)&&(p instanceof Map?p.set(L,S):p[L]=S)}},o=this,E=0,D=M;E<D.length;E++){var $=D[E];h($)}return this.options.enableCircularCheck&&this.recursionStack.delete(n),p}else return n}},r.prototype.applyCustomTransformations=function(t,n,e,i,a){var s=this,u=g.findTransformMetadatas(n,e,this.transformationType);return this.options.version!==void 0&&(u=u.filter(function(c){return c.options?s.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?u=u.filter(function(c){return c.options?s.checkGroups(c.options.groups):!0}):u=u.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),u.forEach(function(c){t=c.transformFn({value:t,key:e,obj:i,type:a,options:s.options})}),t},r.prototype.isCircular=function(t){return this.recursionStack.has(t)},r.prototype.getReflectedType=function(t,n){if(t){var e=g.findTypeMetadata(t,n);return e?e.reflectedType:void 0}},r.prototype.getKeys=function(t,n,e){var i=this,a=g.getStrategy(t);a==="none"&&(a=this.options.strategy||"exposeAll");var s=[];if((a==="exposeAll"||e)&&(n instanceof Map?s=Array.from(n.keys()):s=Object.keys(n)),e)return s;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var u=g.getExposedProperties(t,this.transformationType),c=g.getExcludedProperties(t,this.transformationType);s=z(z([],u,!0),c,!0)}if(!this.options.ignoreDecorators&&t){var u=g.getExposedProperties(t,this.transformationType);this.transformationType===f.PLAIN_TO_CLASS&&(u=u.map(function(h){var o=g.findExposeMetadata(t,h);return o&&o.options&&o.options.name?o.options.name:h})),this.options.excludeExtraneousValues?s=u:s=s.concat(u);var M=g.getExcludedProperties(t,this.transformationType);M.length>0&&(s=s.filter(function(h){return!M.includes(h)})),this.options.version!==void 0&&(s=s.filter(function(h){var o=g.findExposeMetadata(t,h);return!o||!o.options?!0:i.checkVersion(o.options.since,o.options.until)})),this.options.groups&&this.options.groups.length?s=s.filter(function(h){var o=g.findExposeMetadata(t,h);return!o||!o.options?!0:i.checkGroups(o.options.groups)}):s=s.filter(function(h){var o=g.findExposeMetadata(t,h);return!o||!o.options||!o.options.groups||!o.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(s=s.filter(function(p){return i.options.excludePrefixes.every(function(h){return p.substr(0,h.length)!==h})})),s=s.filter(function(p,h,o){return o.indexOf(p)===h}),s},r.prototype.checkVersion=function(t,n){var e=!0;return e&&t&&(e=this.options.version>=t),e&&n&&(e=this.options.version<n),e},r.prototype.checkGroups=function(t){return t?this.options.groups.some(function(n){return t.includes(n)}):!0},r}(),v={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},O=globalThis&&globalThis.__assign||function(){return O=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},O.apply(this,arguments)},at=function(){function r(){}return r.prototype.instanceToPlain=function(t,n){var e=new P(f.CLASS_TO_PLAIN,O(O({},v),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToPlainFromExist=function(t,n,e){var i=new P(f.CLASS_TO_PLAIN,O(O({},v),e));return i.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.plainToInstance=function(t,n,e){var i=new P(f.PLAIN_TO_CLASS,O(O({},v),e));return i.transform(void 0,n,t,void 0,void 0,void 0)},r.prototype.plainToClassFromExist=function(t,n,e){var i=new P(f.PLAIN_TO_CLASS,O(O({},v),e));return i.transform(t,n,void 0,void 0,void 0,void 0)},r.prototype.instanceToInstance=function(t,n){var e=new P(f.CLASS_TO_CLASS,O(O({},v),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToClassFromExist=function(t,n,e){var i=new P(f.CLASS_TO_CLASS,O(O({},v),e));return i.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.serialize=function(t,n){return JSON.stringify(this.instanceToPlain(t,n))},r.prototype.deserialize=function(t,n,e){var i=JSON.parse(n);return this.plainToInstance(t,i,e)},r.prototype.deserializeArray=function(t,n,e){var i=JSON.parse(n);return this.plainToInstance(t,i,e)},r}();function St(r){return r===void 0&&(r={}),function(t,n){g.addExposeMetadata({target:t instanceof Function?t:t.constructor,propertyName:n,options:r})}}var Q=new at;function ut(r,t){return Q.instanceToPlain(r,t)}function ct(r,t,n){return Q.plainToInstance(r,t,n)}class pt{static parse(t,n,...e){return ct(n,t,{excludeExtraneousValues:!0,enableImplicitConversion:!0,exposeDefaultValues:!0,exposeUnsetFields:!0,enableCircularCheck:!0,targetMaps:e})}static parseArray(t,n,...e){return this.parse(t,n,e)}static copy(t,n){return this.parse(t.toAliasObject(),n)}}class w{static newInstance(){return new this}static getCustomFieldName(t){return R(this.newInstance(),t)}static getCustomFormFieldConfig(t){return F(this.newInstance(),t)}static getCustomFormFieldConfigList(){return U(this.newInstance())}static getgetFormFieldList(){return j(this.newInstance())}getCustomFormFieldConfig(t){return F(this,t)}getCustomFormConfigList(){return U(this)}getCustomFormList(){return j(this)}getCustomFieldName(t){return this.getCustomFieldName(t)}toAliasObject(){return ut(this)}toAliasString(){return JSON.stringify(this.toAliasObject())}toNormalString(){return JSON.stringify(this)}assign(t){return Object.assign(this,t)}copy(){return pt.copy(this,this.constructor)}expose(...t){const n=Object.keys(this);for(const e of n)t.includes(e)||(this[e]=void 0);return this}exclude(...t){const n=Object.keys(this);for(const e of n)t.includes(e)&&(this[e]=void 0);return this}}const Z=Symbol("customFieldName");function At(r){return function(t,n){Reflect.defineMetadata(Z,r,t,n)}}function R(r,t){let n=Reflect.getOwnMetadata(Z,r,t);if(n)return n;const e=Object.getPrototypeOf(r);return e.constructor.name===w.name?t:(n=R(e,t),n)}export{w as A,q as E,At as F,ht as a,St as b,pt as c};

import{A as d,_ as g,u as C}from"./index-538f2ed9.js";import{d as w,A as V,q as O,t as r,o as u,c as f,a as E,B as M,b as _,e as c,I as q,J as H,K as B,L as N}from"./vendor-55e0ca6f.js";import{_ as S}from"./plugin-vue_export-helper-c27b6911.js";const z=w({__name:"index",setup(F){const I=d.asyncComponent(()=>g(()=>import("./Loading-080a8a92.js"),["./Loading-080a8a92.js","./vendor-55e0ca6f.js","./package-adbb5821.js","./plugin-vue_export-helper-c27b6911.js","./Loading-e020e04c.css"],import.meta.url)),A=d.asyncComponent(()=>g(()=>import("./APP-dbcb73c8.js"),["./APP-dbcb73c8.js","./vendor-55e0ca6f.js","./index-538f2ed9.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./APP-f1f5bfef.css"],import.meta.url)),D=d.asyncComponent(()=>g(()=>import("./ToolBar-e50535a9.js"),["./ToolBar-e50535a9.js","./index-538f2ed9.js","./vendor-55e0ca6f.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./package-adbb5821.js","./ToolBar-71b92999.css"],import.meta.url)),P=d.asyncComponent(()=>g(()=>import("./Taskbar-21bd1cc8.js"),["./Taskbar-21bd1cc8.js","./index-538f2ed9.js","./vendor-55e0ca6f.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./Taskbar-e546379e.css"],import.meta.url)),{appListWithHandler:R,appList:m}=V(C().DesktopConfig),X=O(()=>{const{currentBackgroundImg:e,defaultBackgroundImg:t}=C().DesktopConfig;return e||t}),T=r(!1),i=r(0),o=r(),l=r(),p=r({offsetX:0,offsetY:0,pageX:0,pageY:0});let v;function Y(e){const{offsetX:t,offsetY:a,pageX:n,pageY:s}=e;p.value={offsetX:t,offsetY:a,pageX:n,pageY:s},l.value=e.target}function k(e,t=100){setTimeout(()=>{if(o.value&&!o.value.classList.contains("dragging_back")){const a=e.clientX-p.value.offsetX,n=e.clientY-p.value.offsetY,s=`
        left: ${a}px;
        top: ${n}px;
      `;o.value.style.cssText=s}},t)}function $(e,t){v=setTimeout(()=>{var a;i.value=t,!o.value&&e.target.classList.contains("app_item")&&(Y(e),o.value=e.target.cloneNode(!0),o.value.classList.add("dragging_copy"),(a=e.target.parentElement)==null||a.appendChild(o.value),k(e,0),e.target.classList.add("dragging"))},16*15)}function b(e){clearTimeout(v),k(e)}function h(e,t){var a;if(e.preventDefault(),i.value!==t&&o.value&&!((a=o.value)!=null&&a.classList.contains("dragging_back"))){const n=m.value[i.value];m.value.splice(i.value,1),m.value.splice(t,0,n),i.value=t}}function y(){if(clearTimeout(v),o.value){o.value.classList.add("dragging_back");const e=`--animate-time: ${L()}ms`;if(o.value.parentElement.style.cssText=e,l.value){const{left:t,top:a}=l.value.getBoundingClientRect(),n=`
      left: ${t}px;
      top: ${a}px;
    `;o.value.style.cssText=n}}setTimeout(()=>{var e,t,a;(e=o.value)==null||e.remove(),o.value=void 0,(t=l.value)!=null&&t.classList.contains("dragging")&&((a=l.value)==null||a.classList.remove("dragging"))},L())}function L(){var x;const{pageX:e,pageY:t}=p.value,{left:a,top:n}=((x=o.value)==null?void 0:x.getBoundingClientRect())||{left:0,top:0},s=Math.sqrt(Math.pow(e-a,2)+Math.pow(t-n,2));return Math.min(s/2,500)}return(e,t)=>(u(),f(B,{name:"fade"},{default:E(()=>[T.value?(u(),M("div",{key:0,class:"desktop",style:N({backgroundImage:`url(${X.value})`}),onMouseup:y,onMouseleave:y,onMousemove:t[0]||(t[0]=a=>b(a))},[_(c(D),{key:"ToolBar"}),_(B,{class:"main",tag:"div",name:"drag"},{default:E(()=>[(u(!0),M(q,null,H(c(R),(a,n)=>(u(),f(c(A),{key:a.name,data:a,onMouseenter:s=>h(s,n),onMousedown:s=>$(s,n)},null,8,["data","onMouseenter","onMousedown"]))),128))]),_:1}),_(c(P),{key:"TaskBar"})],36)):(u(),f(c(I),{key:1,onAnimationend:t[1]||(t[1]=a=>T.value=!0)}))]),_:1}))}}),W=S(z,[["__scopeId","data-v-07909296"]]);export{W as default};

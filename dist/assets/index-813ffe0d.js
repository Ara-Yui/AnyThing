import{A as d,_ as m,u as L}from"./index-9014978f.js";import{d as X,A as Y,q as D,t as u,o as v,B as y,b as f,e as c,a as R,J as $,K as w,L as V,M as O,c as q}from"./vendor-1633e3f1.js";import{_ as H}from"./plugin-vue_export-helper-c27b6911.js";const N=X({__name:"index",setup(z){const M=d.asyncComponent(()=>m(()=>import("./APP-6d6cf9a6.js"),["./APP-6d6cf9a6.js","./vendor-1633e3f1.js","./index-9014978f.js","./plugin-vue_export-helper-c27b6911.js","./index-b1285c7a.css","./APP-15800361.css"],import.meta.url)),B=d.asyncComponent(()=>m(()=>import("./ToolBar-ce6689ca.js"),["./ToolBar-ce6689ca.js","./index-9014978f.js","./vendor-1633e3f1.js","./plugin-vue_export-helper-c27b6911.js","./index-b1285c7a.css","./ToolBar-71b92999.css"],import.meta.url)),C=d.asyncComponent(()=>m(()=>import("./Taskbar-10f49c39.js"),["./Taskbar-10f49c39.js","./index-9014978f.js","./vendor-1633e3f1.js","./plugin-vue_export-helper-c27b6911.js","./index-b1285c7a.css","./Taskbar-c92b7523.css"],import.meta.url)),{appListWithHandler:E,appList:p}=Y(L().DesktopConfig),I=D(()=>{const{currentBackgroundImg:e,defaultBackgroundImg:t}=L().DesktopConfig;return e||t}),l=u(0),o=u(),i=u(),r=u({offsetX:0,offsetY:0,pageX:0,pageY:0});let g;function A(e){const{offsetX:t,offsetY:a,pageX:s,pageY:n}=e;r.value={offsetX:t,offsetY:a,pageX:s,pageY:n},i.value=e.target}function _(e,t=100){setTimeout(()=>{if(o.value&&!o.value.classList.contains("dragging_back")){const a=e.clientX-r.value.offsetX,s=e.clientY-r.value.offsetY,n=`
        left: ${a}px;
        top: ${s}px;
      `;o.value.style.cssText=n}},t)}function b(e,t){g=setTimeout(()=>{var a;l.value=t,!o.value&&e.target.classList.contains("app_item")&&(A(e),o.value=e.target.cloneNode(!0),o.value.classList.add("dragging_copy"),(a=e.target.parentElement)==null||a.appendChild(o.value),_(e,0),e.target.classList.add("dragging"))},16*15)}function h(e){clearTimeout(g),_(e)}function P(e,t){var a;if(e.preventDefault(),l.value!==t&&o.value&&!((a=o.value)!=null&&a.classList.contains("dragging_back"))){const s=p.value[l.value];p.value.splice(l.value,1),p.value.splice(t,0,s),l.value=t}}function T(){if(clearTimeout(g),o.value){o.value.classList.add("dragging_back");const e=`--animate-time: ${k()}ms`;if(o.value.parentElement.style.cssText=e,i.value){const{left:t,top:a}=i.value.getBoundingClientRect(),s=`
      left: ${t}px;
      top: ${a}px;
    `;o.value.style.cssText=s}}setTimeout(()=>{var e,t,a;(e=o.value)==null||e.remove(),o.value=void 0,(t=i.value)!=null&&t.classList.contains("dragging")&&((a=i.value)==null||a.classList.remove("dragging"))},k())}function k(){var x;const{pageX:e,pageY:t}=r.value,{left:a,top:s}=((x=o.value)==null?void 0:x.getBoundingClientRect())||{left:0,top:0},n=Math.sqrt(Math.pow(e-a,2)+Math.pow(t-s,2));return Math.min(n/2,500)}return(e,t)=>(v(),y("div",{class:"desktop",style:O({backgroundImage:`url(${I.value})`}),onMouseup:T,onMouseleave:T,onMousemove:t[0]||(t[0]=a=>h(a))},[f(c(B),{key:"ToolBar"}),f(V,{class:"main",tag:"div",name:"drag"},{default:R(()=>[(v(!0),y($,null,w(c(E),(a,s)=>(v(),q(c(M),{key:a.name,data:a,onMouseenter:n=>P(n,s),onMousedown:n=>b(n,s)},null,8,["data","onMouseenter","onMousedown"]))),128))]),_:1}),f(c(C),{key:"TaskBar"})],36))}}),K=H(N,[["__scopeId","data-v-4e1503b6"]]);export{K as default};

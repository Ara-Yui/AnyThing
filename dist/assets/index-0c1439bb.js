import{b as R,_ as d,N as X,c as Y,r as u,f as m,l as y,h as v,u as c,w,O as D,P as $,Q as O,R as V,g as N}from"./vendor-a3ce1f9d.js";import{A as f,u as L}from"./index-ce014a4f.js";import{_ as H}from"./plugin-vue_export-helper-c27b6911.js";const q=R({__name:"index",setup(z){const M=f.asyncComponent(()=>d(()=>import("./APP-4c0921a5.js"),["./APP-4c0921a5.js","./index-ce014a4f.js","./vendor-a3ce1f9d.js","./vendor-e98c73d8.css","./plugin-vue_export-helper-c27b6911.js","./index-080e9d9f.css","./APP-b5f9b87c.css"],import.meta.url)),C=f.asyncComponent(()=>d(()=>import("./ToolBar-a64b991e.js"),["./ToolBar-a64b991e.js","./vendor-a3ce1f9d.js","./vendor-e98c73d8.css","./index-ce014a4f.js","./plugin-vue_export-helper-c27b6911.js","./index-080e9d9f.css","./ToolBar-71b92999.css"],import.meta.url)),B=f.asyncComponent(()=>d(()=>import("./Taskbar-12173684.js"),["./Taskbar-12173684.js","./vendor-a3ce1f9d.js","./vendor-e98c73d8.css","./index-ce014a4f.js","./plugin-vue_export-helper-c27b6911.js","./index-080e9d9f.css","./Taskbar-c92b7523.css"],import.meta.url)),{appListWithHandler:E,appList:p}=X(L().DesktopConfig),I=Y(()=>{const{currentBackgroundImg:e,defaultBackgroundImg:t}=L().DesktopConfig;return e||t}),l=u(0),o=u(),i=u(),r=u({offsetX:0,offsetY:0,pageX:0,pageY:0});let g;function h(e){const{offsetX:t,offsetY:a,pageX:s,pageY:n}=e;r.value={offsetX:t,offsetY:a,pageX:s,pageY:n},i.value=e.target}function _(e,t=100){setTimeout(()=>{if(o.value&&!o.value.classList.contains("dragging_back")){const a=e.clientX-r.value.offsetX,s=e.clientY-r.value.offsetY,n=`
        left: ${a}px;
        top: ${s}px;
      `;o.value.style.cssText=n}},t)}function P(e,t){g=setTimeout(()=>{var a;l.value=t,!o.value&&e.target.classList.contains("app_item")&&(h(e),o.value=e.target.cloneNode(!0),o.value.classList.add("dragging_copy"),(a=e.target.parentElement)==null||a.appendChild(o.value),_(e,0),e.target.classList.add("dragging"))},16*15)}function b(e){clearTimeout(g),_(e)}function A(e,t){var a;if(e.preventDefault(),l.value!==t&&o.value&&!((a=o.value)!=null&&a.classList.contains("dragging_back"))){const s=p.value[l.value];p.value.splice(l.value,1),p.value.splice(t,0,s),l.value=t}}function T(){if(clearTimeout(g),o.value){o.value.classList.add("dragging_back");const e=`--animate-time: ${k()}ms`;if(o.value.parentElement.style.cssText=e,i.value){const{left:t,top:a}=i.value.getBoundingClientRect(),s=`
      left: ${t}px;
      top: ${a}px;
    `;o.value.style.cssText=s}}setTimeout(()=>{var e,t,a;(e=o.value)==null||e.remove(),o.value=void 0,(t=i.value)!=null&&t.classList.contains("dragging")&&((a=i.value)==null||a.classList.remove("dragging"))},k())}function k(){var x;const{pageX:e,pageY:t}=r.value,{left:a,top:s}=((x=o.value)==null?void 0:x.getBoundingClientRect())||{left:0,top:0},n=Math.sqrt(Math.pow(e-a,2)+Math.pow(t-s,2));return Math.min(n/2,500)}return(e,t)=>(m(),y("div",{class:"desktop",style:V({backgroundImage:`url(${I.value})`}),onMouseup:T,onMouseleave:T,onMousemove:t[0]||(t[0]=a=>b(a))},[v(c(C),{key:"ToolBar"}),v(O,{class:"main",tag:"div",name:"drag"},{default:w(()=>[(m(!0),y(D,null,$(c(E),(a,s)=>(m(),N(c(M),{key:a.name,data:a,onMouseenter:n=>A(n,s),onMousedown:n=>P(n,s)},null,8,["data","onMouseenter","onMousedown"]))),128))]),_:1}),v(c(B),{key:"TaskBar"})],36))}}),S=H(q,[["__scopeId","data-v-4e1503b6"]]);export{S as default};

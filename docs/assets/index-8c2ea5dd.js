import{A as d,_ as m,u as y}from"./index-2d14f341.js";import{d as Y,A as b,q as D,t as u,o as v,B as L,b as f,e as c,a as R,O as $,P as w,N as O,M as V,c as N}from"./vendor-a32ff1ab.js";import{_ as q}from"./plugin-vue_export-helper-c27b6911.js";const H=Y({__name:"index",setup(z){const M=d.asyncComponent(()=>m(()=>import("./APP-d778e368.js"),["./APP-d778e368.js","./vendor-a32ff1ab.js","./index-2d14f341.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./APP-55ecb998.css"],import.meta.url)),B=d.asyncComponent(()=>m(()=>import("./ToolBar-cb2bb39e.js"),["./ToolBar-cb2bb39e.js","./index-2d14f341.js","./vendor-a32ff1ab.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./ToolBar-71b92999.css"],import.meta.url)),C=d.asyncComponent(()=>m(()=>import("./Taskbar-73a04c02.js"),["./Taskbar-73a04c02.js","./index-2d14f341.js","./vendor-a32ff1ab.js","./plugin-vue_export-helper-c27b6911.js","./index-e3a6a88d.css","./Taskbar-48cf6335.css"],import.meta.url)),{appListWithHandler:E,appList:p}=b(y().DesktopConfig),I=D(()=>{const{currentBackgroundImg:e,defaultBackgroundImg:t}=y().DesktopConfig;return e||t}),l=u(0),o=u(),i=u(),r=u({offsetX:0,offsetY:0,pageX:0,pageY:0});let g;function A(e){const{offsetX:t,offsetY:a,pageX:s,pageY:n}=e;r.value={offsetX:t,offsetY:a,pageX:s,pageY:n},i.value=e.target}function _(e,t=100){setTimeout(()=>{if(o.value&&!o.value.classList.contains("dragging_back")){const a=e.clientX-r.value.offsetX,s=e.clientY-r.value.offsetY,n=`
        left: ${a}px;
        top: ${s}px;
      `;o.value.style.cssText=n}},t)}function P(e,t){g=setTimeout(()=>{var a;l.value=t,!o.value&&e.target.classList.contains("app_item")&&(A(e),o.value=e.target.cloneNode(!0),o.value.classList.add("dragging_copy"),(a=e.target.parentElement)==null||a.appendChild(o.value),_(e,0),e.target.classList.add("dragging"))},16*15)}function h(e){clearTimeout(g),_(e)}function X(e,t){var a;if(e.preventDefault(),l.value!==t&&o.value&&!((a=o.value)!=null&&a.classList.contains("dragging_back"))){const s=p.value[l.value];p.value.splice(l.value,1),p.value.splice(t,0,s),l.value=t}}function T(){if(clearTimeout(g),o.value){o.value.classList.add("dragging_back");const e=`--animate-time: ${k()}ms`;if(o.value.parentElement.style.cssText=e,i.value){const{left:t,top:a}=i.value.getBoundingClientRect(),s=`
      left: ${t}px;
      top: ${a}px;
    `;o.value.style.cssText=s}}setTimeout(()=>{var e,t,a;(e=o.value)==null||e.remove(),o.value=void 0,(t=i.value)!=null&&t.classList.contains("dragging")&&((a=i.value)==null||a.classList.remove("dragging"))},k())}function k(){var x;const{pageX:e,pageY:t}=r.value,{left:a,top:s}=((x=o.value)==null?void 0:x.getBoundingClientRect())||{left:0,top:0},n=Math.sqrt(Math.pow(e-a,2)+Math.pow(t-s,2));return Math.min(n/2,500)}return(e,t)=>(v(),L("div",{class:"desktop",style:V({backgroundImage:`url(${I.value})`}),onMouseup:T,onMouseleave:T,onMousemove:t[0]||(t[0]=a=>h(a))},[f(c(B),{key:"ToolBar"}),f(O,{class:"main",tag:"div",name:"drag"},{default:R(()=>[(v(!0),L($,null,w(c(E),(a,s)=>(v(),N(c(M),{key:a.name,data:a,onMouseenter:n=>X(n,s),onMousedown:n=>P(n,s)},null,8,["data","onMouseenter","onMousedown"]))),128))]),_:1}),f(c(C),{key:"TaskBar"})],36))}}),W=q(H,[["__scopeId","data-v-1aad5a4c"]]);export{W as default};

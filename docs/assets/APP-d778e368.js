import{d as C,t as v,A as w,q as D,v as M,r as z,o as d,B as l,D as n,O as L,P,G as h,b as N,e as R,F as r,I as V}from"./vendor-a32ff1ab.js";import{u as b,D as u}from"./index-2d14f341.js";import{_ as x}from"./plugin-vue_export-helper-c27b6911.js";const E={key:0,class:"task"},I={class:"task_list"},q=["onClick"],F={class:"header"},O={class:"name"},S={class:"preview"},j={class:"main"},G={key:0,class:"app_name"},H=C({__name:"APP",props:{data:{type:Object,required:!0},hideName:{type:Boolean,default:!1},size:{type:Number,default:void 0},isTaskApp:{type:Boolean,default:!1}},setup(t){const e=t,p=v(),f=v(new WeakMap),{appIconSize:y,appList:T,appTaskList:m}=w(b().DesktopConfig),i=D(()=>m.value.filter(a=>a.app.name===e.data.name));function A(){e.data.handler&&!e.isTaskApp?e.data.handler(e.data):e.isTaskApp&&i.value.length===1?_(i.value[0]):e.isTaskApp&&e.data.handler&&!i.value.length&&e.data.handler(e.data,()=>{u.setTaskBarDomByApp(p.value,e.data)})}function _(a){var s,c;a.isMinimize?(s=a.modelDom)==null||s.classList.remove("any_model_minimize"):(c=a.modelDom)==null||c.classList.add("any_model_minimize"),a.isMinimize=!a.isMinimize}function g(a,s){a&&f.value.set(s,a)}function B(){e.isTaskApp&&m.value.filter(s=>s.app.name===e.data.name).forEach(s=>{u.refreshTaskView(s,f.value.get(s))})}return M(()=>{if(e.isTaskApp)u.setTaskBarDomByApp(p.value,e.data);else{const a=T.value.find(s=>s.name===e.data.name);a&&(a.dom=p.value)}}),(a,s)=>{const c=z("n-image");return d(),l("div",{ref_key:"appRef",ref:p,class:"app_item",onClick:A,onMouseenter:B},[i.value.length&&t.isTaskApp?(d(),l("div",E,[n("div",I,[(d(!0),l(L,null,P(i.value,o=>(d(),l("div",{key:o.id,class:"task_item",onClick:V(k=>_(o),["stop"])},[n("div",F,[n("div",O,r(o.app.name)+"-"+r(o.id),1)]),n("div",S,[n("div",{ref_for:!0,ref:k=>g(k,o),class:"preview_main"},null,512)])],8,q))),128))])])):h("",!0),n("div",j,[N(c,{class:"app_icon","preview-disabled":"",width:t.size||R(y),src:t.data.icon},null,8,["width","src"]),t.hideName?h("",!0):(d(),l("div",G,r(t.data.name),1))])],544)}}}),K=x(H,[["__scopeId","data-v-5312ede0"]]);export{K as default};

var m=Object.defineProperty;var g=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>(g(n,typeof e!="symbol"?e+"":e,t),t);import{A as w,_ as f,u as k}from"./index-7f0c6d36.js";import{d as h,o as l,B as u,ap as x,D as y,t as v,r as T,c,a as d,b,e as p,T as C}from"./vendor-a32ff1ab.js";import{_ as H}from"./plugin-vue_export-helper-c27b6911.js";const L={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},M=x('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6V3"></path><path d="M16.25 7.75L18.4 5.6"></path><path d="M18 12h3"></path><path d="M16.25 16.25l2.15 2.15"></path><path d="M12 18v3"></path><path d="M7.75 16.25L5.6 18.4"></path><path d="M6 12H3"></path><path d="M7.75 7.75L5.6 5.6"></path></g>',1),B=[M],P=h({name:"Loader",render:function(e,t){return l(),u("svg",L,B)}}),W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},E=y("path",{d:"M416 64H96a64.07 64.07 0 0 0-64 64v256a64.07 64.07 0 0 0 64 64h320a64.07 64.07 0 0 0 64-64V128a64.07 64.07 0 0 0-64-64zm-80 64a48 48 0 1 1-48 48a48.05 48.05 0 0 1 48-48zM96 416a32 32 0 0 1-32-32v-67.63l94.84-84.3a48.06 48.06 0 0 1 65.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 0 1-32 32H217.63l121.42-121.42a47.72 47.72 0 0 1 61.64-.16L448 333.84z",fill:"currentColor"},null,-1),I=[E],q=h({name:"Image",render:function(e,t){return l(),u("svg",W,I)}});class A{constructor(e){i(this,"loading",!1);i(this,"headers",{});i(this,"controller",new AbortController);i(this,"timeout",5*1e3);this.loading=e||!1,this.headers={"Content-Type":"application/json"}}request(e,t,s){return new Promise((o,r)=>{this.loading&&r("请求正在进行中，请稍后再试"),this.loading=!0,this.timeoutHandler(),fetch(e,{method:t,body:JSON.stringify(s),headers:this.headers,signal:this.controller.signal}).then(a=>{if(this.loading=!1,a.ok)return a.json();r(a.statusText)}).then(a=>{o(a.data)}).catch(a=>{this.errorHandler(a),r(a)})})}timeoutHandler(){this.timeout>0&&setTimeout(()=>{this.loading=!1,this.controller.abort()},this.timeout)}errorHandler(e){this.loading=!1,this.controller.abort()}async get(e,t){return await this.request(e,"GET",t)}async post(e,t){return await this.request(e,"POST",t)}async put(e,t){return await this.request(e,"PUT",t)}async delete(e,t){return await this.request(e,"DELETE",t)}setHeaders(e){return this.headers={...this.headers,...e},this}clearHeaders(){return this.headers={},this}deleteHeader(e){return delete this.headers[e],this}setTimeout(e){return this.timeout=e,this}cancel(){return this.controller.abort(),this}}const D=A,V=()=>{async function n(){const{rawSrc:t}=await new D().get("https://api.wetab.link/api/wallpaper/next?type=random");return t}async function e(t){const s=await n(),o=new Image;return o.src=s,new Promise((r,a)=>{o.onload=()=>{const _=`
        background-image: url(${s});
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      `;t.style.cssText=_,r()},o.onerror=()=>{a()}})}return{getRandomWallpaper:n,setRandomWallpaperToDom:e}};const z=h({__name:"WallPaperQuick",setup(n){const e=w.asyncComponent(()=>f(()=>import("./ToolBarIconContain-0ff802d8.js"),["./ToolBarIconContain-0ff802d8.js","./plugin-vue_export-helper-c27b6911.js","./vendor-a32ff1ab.js","./ToolBarIconContain-0fa391c5.css"],import.meta.url)),t=v(!1);async function s(){if(t.value)return;t.value=!0;const{getRandomWallpaper:o}=V(),r=await o();k().DesktopConfig.setDesktopBackgroudImg(r,t)}return(o,r)=>{const a=T("n-icon");return l(),c(p(e),{class:"wallpaper_quick",onClick:s},{default:d(()=>[b(C,{name:"wallpaper"},{default:d(()=>[t.value?(l(),c(a,{key:0,class:"loading icon",component:p(P)},null,8,["component"])):(l(),c(a,{key:1,class:"icon",component:p(q)},null,8,["component"]))]),_:1})]),_:1})}}}),O=H(z,[["__scopeId","data-v-b6dc6b98"]]);export{O as default};
